<nav>
  <div class="nav-wrapper">
      <a [routerLink]="['/home']" class="brand-logo"><i class="material-icons">book</i>Easy Learning</a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
      <li class="active"><a [routerLink]="['/forumHome']"><i class="material-icons left">forum</i>Fórum</a></li>
      <li><a [routerLink]="['/groupsHome']"><i class="material-icons left">group</i>Grupos</a></li>
      <li><a href="collapsible.html"><i class="material-icons left">import_contacts</i>Exercícios</a></li>
      <li><a (click)="logout()"><i class="material-icons left">exit_to_app</i>Sair</a></li>
      </ul>
  </div>
</nav>

  <div class="row">
    <div class="col s12 m4 l1"></div>

    <div class="col s12 m4 l10">
      <div class="row">
        <p class="header">{{ currentQuestion.title }}</p>
        <div class="divider"></div>
      </div>

      <div class="row">
        <div class="col s12 m4 l1 center-align">
            <i (click)="setScoreQuestion(1)" class="material-icons">expand_less</i>
            <div class="score">{{ currentQuestion.score }}</div>
            <i (click)="setScoreQuestion(-1)" class="material-icons">expand_more</i>
        </div>

        <div class="col s12 m4 l7">
          <div>
              {{ currentQuestion.text }}
          </div>

          <div class="row padd" *ngIf="checkUser(currentQuestion.user)">
            <label><a class="modal-trigger" href="#modal1">editar</a></label>
            <label><a class="" (click)="deleteQuestion()">excluir</a></label>
          </div>
        </div>
        
        <div class="col s12 m4 l2 center-align">
          <div class="row">
            <label class="info">perguntado: {{ currentQuestion.published | date: 'dd/MM/yyyy' }}</label>
          </div>

          <div class="row">
              <label class="info">visualizado: 32 vezes</label>
          </div>
        </div>      
      </div>

      <div class="divider"></div>
      
      <h5 *ngIf="!currentQuestion.answers">0 respostas</h5>
      
      <div *ngIf="currentQuestion.answers">
        <h5>{{ currentQuestion.answers.length }} respostas</h5>
  
        <div *ngFor="let answer of currentQuestion.answers; let i = index" class="row">
          <div class="col s12 m4 l1 center-align">
              <i (click)="setScoreAnswer(answer, 1)" class="material-icons">expand_less</i>
              <div class="score">{{ answer.score}}</div>
              <i (click)="setScoreAnswer(answer, -1)" class="material-icons">expand_more</i>
          </div>
  
          <div class="col s12 m4 l7">
            <div>
                {{ answer.text }}
            </div>
  
            <div class="row padd" *ngIf="checkUser(answer.user)">
              <label (click)="edit(answer)">editar</label>
              <label (click)="removeAnswer(answer)">exluir</label>
            </div>
           
            <div *ngIf="(i === index) && show">
                <textarea [(ngModel)]="answer.text" id="answer" name="answer" class="materialize-textarea" required></textarea>
                <button type="button" class="btn waves-effect waves-light answer-button"
                (click)="updateAnswer(answer, index)">Atualizar</button>                        
            </div>
  
            <div class="divider"></div>
          </div>
        </div>
      </div>

      <h5 class="padd">Sua resposta</h5>

      <div class="row question-info">
        <form class="col s12" #questionDetailForm="ngForm" id="questionDetailForm" name="questionDetailForm" method="post">
          <div class="row">
            <div class="input-field col s12">
              <textarea [(ngModel)]="answer.text" id="answer" name="answer" class="materialize-textarea" required></textarea>
              <label for="textarea1">Digite sua resposta</label>
            </div>
          </div>

          <button [disabled]="!questionDetailForm.form.valid" class="waves-effect waves-light btn answer-button margin-all"
          type="submit" name="action" (click)="createAnswer()"><i class="material-icons right">cloud</i>Publique sua resposta</button>
        </form>
      </div>
    </div>
    
    <div class="col s12 m4 l1"></div>    
</div>

<div id="modal1" class="modal modal-fixed-footer">
  <div class="modal-content">
    <h4>Editar pergunta</h4>
    
    <div class="row">
      <div class="divider"></div>        
      <h3>{{ currentQuestion.title }}</h3>
      <div class="divider"></div>
    </div>

    <div class="row">
      <form class="col s12">
        <div class="row">
          <div class="input-field col s12">
            <textarea [(ngModel)]="currentQuestion.text" id="questionDescriptionUpdate" name="questionDescriptionUpdate" class="materialize-textarea" required></textarea>
            <label for="textarea2">Corpo da pergunta</label>
          </div>
        </div>
      </form>
    </div>

    <div class="row">
      <div class="input-field col s12">
        <input type="text" class="validate" [(ngModel)]="currentQuestion.tags" id="questionTagsUpdate" name="questionTagsUpdate" required>
        <label for="tags">Tags</label>
      </div>
    </div>

  </div>
  <div class="modal-footer">
    <a class="modal-action modal-close waves-effect waves-green btn-flat " (click)="updateQuestion()">Editar</a>
  </div>
</div>